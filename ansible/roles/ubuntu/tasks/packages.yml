---

- name: Update all packages to their latest version
  apt:
    name: "*"
    state: latest  # noqa package-latest
  become: yes
  register: update

- name: Remove useless packages from the cache
  apt:
    autoclean: yes
  become: yes
  register: clean

- name: Remove dependencies that are no longer required
  apt:
    autoremove: yes
  become: yes
  register: remove

- name: Check if /var/run/reboot-required exists
  stat:
    path: /var/run/reboot-required
  register: reboot

- name: Install packages
  apt:
    state: present
    name:
      - curl
      - fd-find
      - fzf
      - git
      - nodejs
      - pipenv
      - rbenv
      - silversearcher-ag
      - vim
      - zsh
  become: yes
