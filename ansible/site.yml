---

- name: awx
  hosts: localhost
  connection: local
  gather_facts: false
  become: false
  roles:
    - awx
  tags:
    - awx

- name: ubuntu
  hosts: ubuntu
  gather_facts: true
  become: false
  roles:
    - ubuntu
  tags:
    - ubuntu

- name: pi
  hosts: pi
  gather_facts: true
  become: false
  roles:
    - pi
  tags:
    - pi

- name: zabbix / server
  hosts: zabbix_servers
  gather_facts: true
  become: false
  tasks:
    - name: Include zabbix / server
      ansible.builtin.include_role:
        name: zabbix
        tasks_from: server.yml
      vars:
        zabbix_source_ip: 192.168.1.67
        zabbix_server: 192.168.1.67
    - name: Include zabbix / config
      ansible.builtin.include_role:
        name: zabbix
        tasks_from: config.yml
      vars:
        mark_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30633830396334623565343036613730623738353439613533326633303431643361623732363036
          6535396562376164386136653839643766616137626531650a376264336137353331353066616631
          38636666396161383732323432336631663136656133383265353234376630613963396131326336
          3534646630643061320a656333616631653035333430376233323437623066313664353161353064
          3132
        zabbix_source_ip: 192.168.1.67
        zabbix_server: 192.168.1.67
        server_url: http://thinkpad/zabbix/
        login_user: mark
        login_password: "{{ mark_password }}"
        # login_user: Admin
        # login_password: !vault |
        #   $ANSIBLE_VAULT;1.1;AES256
        #   61393262353933393233373461613537626265313461663461383966376436643165646130653164
        #   6563623765316563616138323962303037633233623833320a636561303063643830316635326462
        #   35313334323238303363383136653063656263663139393730383265343430643663323661653034
        #   6431356436336339640a353664343664633437643833653561646662363863663731623535636563
        #   3064
        linux_servers:
          - dns: thinkpad
            ip: 192.168.1.67
          - dns: gala
            ip: 192.168.1.138
          - dns: lenovo
            ip: 192.168.1.98
          - dns: net1
            ip: 192.168.1.10
          - dns: net2
            ip: 192.168.1.11
        unifi_devices:
          - dns: gateway
            ip: 192.168.1.1
          - dns: switch1
            ip: 192.168.1.95
          - dns: switch2
            ip: 192.168.1.40
          - dns: switch3
            ip: 192.168.1.70
          - dns: switch4
            ip: 192.168.1.137
          - dns: basement
            ip: 192.168.1.63
          - dns: bedroom
            ip: 192.168.1.124
          - dns: familyroom
            ip: 192.168.1.120
        printers:
          - dns: printer
            ip: 192.168.1.134
        ping_servers:
          - dns: dns.google
            ip: 8.8.8.8
          - dns: one.one.one.one
            ip: 1.1.1.1
        nas_devices:
          - dns: qnap
            ip: 192.168.1.118
  tags:
    - zabbix

- name: zabbix / agent
  hosts: zabbix_clients
  gather_facts: true
  become: false
  tasks:
    - name: Include zabbix / agent
      ansible.builtin.include_role:
        name: zabbix
        tasks_from: agent.yml
      vars:
        zabbix_server: 192.168.1.67
  tags:
    - zabbix
