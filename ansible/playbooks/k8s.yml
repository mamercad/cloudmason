---
- name: K8s
  hosts: "{{ ansible_limit | default(omit) }}"
  gather_facts: false
  become: false

  tasks:

    - name: Include K8s role (clusterpi)
      include_role:
        name: k8s
      vars:
        context: clusterpi
        metallb:
          memberlist: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            33323030636235396437643339653136363730656138666665666166393930616236356331626562
            3332363038383161326230613466386633653431393263660a326132613034386463663139623734
            64376132303935396631303066313836393634336235393466643466653733663139333761613834
            3532393937303963630a313338313230333037313461346537666538313965653664363632626537
            36633831616361393336626530313731313336376633323265316664346631313564623264663737
            31373362363339633933383965306363633937643831396332313630323932653232323866303861
            36656465633732346437666462616562623665366232383131663930616465653234373062653738
            37376437613931306132626235666562303132396232303162333162346531363237653663633964
            31323531313531323262646331303038346631396166633864343938633762666361386537393163
            31316438653461356362643430396232326635393663353761386361666362666133633464313464
            63613935396130623666656139343764626139336632616233653936306132643263333830376632
            62333035313239396436623463303334316531313164623736643730626532653266343465663638
            65303932643336376431393930333862393436313030303963343139373036366665303432653037
            31306364353735313861373332363839313238366231316565666431393462303332636239366461
            62306331633464326532323364636439383733326432313434376663623832316165306230343639
            35653933633535346437
          range: 192.168.1.230-192.168.1.239

    - name: Include K8s role (ambrosia)
      include_role:
        name: k8s
      vars:
        context: ambrosia
        metallb:
          memberlist: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            33323030636235396437643339653136363730656138666665666166393930616236356331626562
            3332363038383161326230613466386633653431393263660a326132613034386463663139623734
            64376132303935396631303066313836393634336235393466643466653733663139333761613834
            3532393937303963630a313338313230333037313461346537666538313965653664363632626537
            36633831616361393336626530313731313336376633323265316664346631313564623264663737
            31373362363339633933383965306363633937643831396332313630323932653232323866303861
            36656465633732346437666462616562623665366232383131663930616465653234373062653738
            37376437613931306132626235666562303132396232303162333162346531363237653663633964
            31323531313531323262646331303038346631396166633864343938633762666361386537393163
            31316438653461356362643430396232326635393663353761386361666362666133633464313464
            63613935396130623666656139343764626139336632616233653936306132643263333830376632
            62333035313239396436623463303334316531313164623736643730626532653266343465663638
            65303932643336376431393930333862393436313030303963343139373036366665303432653037
            31306364353735313861373332363839313238366231316565666431393462303332636239366461
            62306331633464326532323364636439383733326432313434376663623832316165306230343639
            35653933633535346437
          range: 192.168.1.220-192.168.1.229
