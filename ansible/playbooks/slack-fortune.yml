---
- name: Slack
  hosts: all
  gather_facts: no

  tasks:

    - name: Install prereqs
      apt:
        name:
          - fortune
          - fortunes
          - fortunes-bofh-excuses

    - shell: fortune bofh-excuses linuxcookie computers linux
      register: fortune

    - include_role:
        name: slack
      vars:
        slack:
          channel: "#general"
          message: "```{{ fortune.stdout_lines | join('\n') }}```"
