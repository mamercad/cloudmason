---
- name: Zabbix / server
  hosts: "{{ ansible_limit | default(omit) }}"
  gather_facts: true
  become: false

  tasks:

    - name: Include zabbix role (server)
      include_role:
        name: zabbix
        tasks_from: server.yml
      vars:
        zabbix_source_ip: 192.168.1.139
        zabbix_server: 192.168.1.139

    - name: Include zabbix role (config)
      include_role:
        name: zabbix
        tasks_from: config.yml
      vars:
        zabbix_source_ip: 192.168.1.139
        zabbix_server: 192.168.1.139
        server_url: http://thinkpad/zabbix/
        login_user: Admin
        login_password: zabbix
        linux_servers:
          - dns: thinkpad
            ip: 192.168.1.139
          - dns: lenovo
            ip: 192.168.1.89
          - dns: net1
            ip: 192.168.1.10
          - dns: net2
            ip: 192.168.1.11
        snmp_servers:
          - dns: gateway
            ip: 192.168.1.1
        printers:
          - dns: printer
            ip: 192.168.1.134
        ping_servers:
          - dns: dns.google
            ip: 8.8.8.8
          - dns: one.one.one.one
            ip: 1.1.1.1
